2024-10-03 10:58:26,158: INFO: ____Versa API POC___
2024-10-03 10:58:26,160: INFO: Trying to connect to Versa from .env to generate API token for oauth
2024-10-03 10:58:29,399: INFO: <Response [200]>
2024-10-03 10:58:29,399: INFO: {"userName":"karunakar.raj@orange.com","tenantName":"Orange","userGroups":[],"userRoles":["ENTERPRISE_ADMINISTRATOR"],"userRoleNames":["Custom_Enterprise Administrator"],"userInfo":{"uuid":"cf97f6fc-a5d8-4b1a-a83b-6547b895438f","name":"karunakar.raj@orange.com","status":"ENABLED","email":"karunakar.raj@orange.com","phoneNumber":"","idleTimeout":15,"landingLifecycle":"CONFIGURATION","siteView":"MAP","landingTenantUUID":null,"landingTenantName":null,"externalUser":false},"isTwoFactor":false,"hasSubTenant":false,"signoutType":null,"ssoType":null,"landingTenantName":null,"language":null,"idpinitiatedSSOUser":false,"defaultPassword":false,"resetPassword":false,"ssouser":false,"defalutPassword":false}
2024-10-03 10:58:29,399: INFO: *** Step 1: Getting initial CSRF token
2024-10-03 10:58:29,642: INFO: Initial request status code: 200
2024-10-03 10:58:29,642: INFO: ECP-CSRF-TOKEN: c19815e4a096bc62edd7147be590ce693e4bc4439e62edce30c5976d1ad7f1b9
2024-10-03 10:58:29,642: INFO: EECP-CSRF-TOKEN: 478FDD41C6F44D2BFDC8A366F2F918DAEA5EC3D9B0C8F57A71C7A85A6EAEE3F652C87FCFC633B612EDA5B310A6579DB0EF05F96500B8069AF07ACD36F70A20F87B08CF4813A51D8372B36EC1D643A301
2024-10-03 10:58:29,642: INFO: *** Step 2: Authenticating
2024-10-03 10:58:31,460: INFO: Auth response status: 201
2024-10-03 10:58:31,460: INFO: https://partner-he1-concerto.versa-networks.com/portalapi/v1/auth/token
2024-10-03 10:58:31,460: INFO: {'username': 'karunakar.raj@orange.com', 'password': 'GoVersa2024!', 'grant_type': 'password', 'scope': 'global', 'client_id': 'concerto', 'client_secret': 'Concerto123@'}
2024-10-03 10:58:31,460: INFO: Full authentication response:
2024-10-03 10:58:31,460: INFO: {"access_token":"eyJhbGciOiJIUzI1NiJ9.eyJqdGkiOiJjZTU5ZjkxODQ1YzY5ODYyYjcxNGRkNjQ4ZWRiNDc0MTdmZTY2NTcxOTYyYjgwMjE4ODYxYmRhZmM0OTBhMzFjIiwiaWF0IjoxNzI3OTMzMzA5LCJyb2xlIjoiVGVuYW50U3VwZXJBZG1pbiIsIm9yZyI6Ik9yYW5nZSIsImV4cCI6OTIyMzM3MjAzNjg1NDc3NX0.H03lNCV2jVvepGVC0K14akzrcxLlbH3g08x8KlMHYok","issued_at":"2024-10-03T05:28:29.292Z","expires_in":"-1","token_type":"Bearer","refresh_token":"eyJhbGciOiJIUzI1NiJ9.eyJqdGkiOiIyMmE5MGI4YjVhMWY3MjVmNjk0MTNhZjllZDgxNjEwMjRhYzMwZDE1OTRmNTBhODRiYWU1YTAwMWIyOGI5YjNmIiwiaWF0IjoxNzI3OTMzMzA5LCJyb2xlIjoiVGVuYW50U3VwZXJBZG1pbiIsIm9yZyI6Ik9yYW5nZSIsImV4cCI6OTIyMzM3MjAzNjg1NDc3NX0.Ws3nT4EeGelWuc__qRQULJH1yl92tM6c9T8cyV6B5eA","user":{"name":"karunakar.raj@orange.com","firstname":"Raj","lastname":"Karunakar","email":"karunakar.raj@orange.com","is_external_user":false,"enable_two_factor":false,"idle_time_out":15,"organization":"Orange","roles":["Custom_Enterprise Administrator"],"primaryrole":"ENTERPRISE_ADMINISTRATOR","primaryRoleName":"Custom_Enterprise Administrator"},"auth_context":{"isAuthInSlaveNode":false},"defaultPassword":false,"AuthenticationResult":{"isvalid":true,"isLocked":false,"isTwoFactor":false,"isResetPassword":false,"user":{"name":"karunakar.raj@orange.com","firstname":"Raj","lastname":"Karunakar","email":"karunakar.raj@orange.com","phone":null,"enableTwoFactor":false,"organization":"Orange","tag":null,"isExternalUser":false,"idleTimeOut":15,"primary-role":"TenantSuperAdmin","personalized-landing-page":null,"ssh-key-dir":".","home-dir":".","allowed-actions":null,"roles":{}},"authContext":{"isAuthInSlaveNode":false}},"isDefaultPassword":false}
2024-10-03 10:58:31,460: INFO: Authentication successful
2024-10-03 10:58:31,460: INFO: <Response [201]>
2024-10-03 10:58:31,460: INFO: {'access_token': 'eyJhbGciOiJIUzI1NiJ9.eyJqdGkiOiJjZTU5ZjkxODQ1YzY5ODYyYjcxNGRkNjQ4ZWRiNDc0MTdmZTY2NTcxOTYyYjgwMjE4ODYxYmRhZmM0OTBhMzFjIiwiaWF0IjoxNzI3OTMzMzA5LCJyb2xlIjoiVGVuYW50U3VwZXJBZG1pbiIsIm9yZyI6Ik9yYW5nZSIsImV4cCI6OTIyMzM3MjAzNjg1NDc3NX0.H03lNCV2jVvepGVC0K14akzrcxLlbH3g08x8KlMHYok', 'issued_at': '2024-10-03T05:28:29.292Z', 'expires_in': '-1', 'token_type': 'Bearer', 'refresh_token': 'eyJhbGciOiJIUzI1NiJ9.eyJqdGkiOiIyMmE5MGI4YjVhMWY3MjVmNjk0MTNhZjllZDgxNjEwMjRhYzMwZDE1OTRmNTBhODRiYWU1YTAwMWIyOGI5YjNmIiwiaWF0IjoxNzI3OTMzMzA5LCJyb2xlIjoiVGVuYW50U3VwZXJBZG1pbiIsIm9yZyI6Ik9yYW5nZSIsImV4cCI6OTIyMzM3MjAzNjg1NDc3NX0.Ws3nT4EeGelWuc__qRQULJH1yl92tM6c9T8cyV6B5eA', 'user': {'name': 'karunakar.raj@orange.com', 'firstname': 'Raj', 'lastname': 'Karunakar', 'email': 'karunakar.raj@orange.com', 'is_external_user': False, 'enable_two_factor': False, 'idle_time_out': 15, 'organization': 'Orange', 'roles': ['Custom_Enterprise Administrator'], 'primaryrole': 'ENTERPRISE_ADMINISTRATOR', 'primaryRoleName': 'Custom_Enterprise Administrator'}, 'auth_context': {'isAuthInSlaveNode': False}, 'defaultPassword': False, 'AuthenticationResult': {'isvalid': True, 'isLocked': False, 'isTwoFactor': False, 'isResetPassword': False, 'user': {'name': 'karunakar.raj@orange.com', 'firstname': 'Raj', 'lastname': 'Karunakar', 'email': 'karunakar.raj@orange.com', 'phone': None, 'enableTwoFactor': False, 'organization': 'Orange', 'tag': None, 'isExternalUser': False, 'idleTimeOut': 15, 'primary-role': 'TenantSuperAdmin', 'personalized-landing-page': None, 'ssh-key-dir': '.', 'home-dir': '.', 'allowed-actions': None, 'roles': {}}, 'authContext': {'isAuthInSlaveNode': False}}, 'isDefaultPassword': False}
2024-10-03 10:58:31,460: INFO: response.headers = 
2024-10-03 10:58:31,461: INFO: {'Content-Encoding': 'gzip', 'Content-Type': 'application/json;charset=UTF-8', 'Date': 'Thu, 03 Oct 2024 05:28:29 GMT', 'Trace-Id': 'a033e12ac3d48dbd6847ba132cfda14f', 'Vary': 'accept-encoding', 'Transfer-Encoding': 'chunked'}
2024-10-03 10:58:31,461: INFO: Token found: eyJhbGciOiJIUzI1NiJ9.eyJqdGkiOiJjZTU5ZjkxODQ1YzY5ODYyYjcxNGRkNjQ4ZWRiNDc0MTdmZTY2NTcxOTYyYjgwMjE4ODYxYmRhZmM0OTBhMzFjIiwiaWF0IjoxNzI3OTMzMzA5LCJyb2xlIjoiVGVuYW50U3VwZXJBZG1pbiIsIm9yZyI6Ik9yYW5nZSIsImV4cCI6OTIyMzM3MjAzNjg1NDc3NX0.H03lNCV2jVvepGVC0K14akzrcxLlbH3g08x8KlMHYok
2024-10-03 10:58:31,461: INFO: All response headers:
2024-10-03 10:58:31,461: INFO: Content-Encoding: gzip
2024-10-03 10:58:31,461: INFO: Content-Type: application/json;charset=UTF-8
2024-10-03 10:58:31,461: INFO: Date: Thu, 03 Oct 2024 05:28:29 GMT
2024-10-03 10:58:31,461: INFO: Trace-Id: a033e12ac3d48dbd6847ba132cfda14f
2024-10-03 10:58:31,461: INFO: Vary: accept-encoding
2024-10-03 10:58:31,461: INFO: Transfer-Encoding: chunked
2024-10-03 10:58:31,461: INFO: All cookies:
2024-10-03 10:58:31,461: INFO: USER_SESSION_RSA_PUBLIC_KEY: MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAmeqh0us2IYk54inN6cgHrEJz62Kpszjli1NqCqquNN3V60CjWU6gnbzvtk2LjbaIspKij9/kODYCJvGziI3i5OU1D6v4V1qeLBFCUy6kjTrNA6eK1ytPHwZuhkV0lGl3btTE3QdZXlNl3dKWTuKsrtvgc6f/2BJTxnd4aYiURYEMr6B/3ybSZTdiypIGN3ltxmm1QLAGrBT8GY0RCWlXuvRP6VjOOHWhBlaifrp6v8bZ/5UdUFKBMnb2BybXlYuWAzL5xBh+P0b+DriAsSlKiV637Q4dZ1HLqogeyzcVm6f04w3SZHOFK66mnC0ERI/FnVvL9KPWt93Yi0PDn87sZQIDAQAB
2024-10-03 10:58:31,461: INFO: ECP-CSRF-TOKEN: c19815e4a096bc62edd7147be590ce693e4bc4439e62edce30c5976d1ad7f1b9
2024-10-03 10:58:31,461: INFO: EECP-CSRF-TOKEN: 478FDD41C6F44D2BFDC8A366F2F918DAEA5EC3D9B0C8F57A71C7A85A6EAEE3F652C87FCFC633B612EDA5B310A6579DB0EF05F96500B8069AF07ACD36F70A20F87B08CF4813A51D8372B36EC1D643A301
2024-10-03 10:58:31,461: INFO: EJSESSIONID: 9b0281b4037bbbf1a54f674f128da9dd7a16da5d073792002bae342a9302f12d
2024-10-03 10:58:31,462: INFO: Getting Inputs from .\\Input\\ConcertoUserProfile.xlsx
2024-10-03 10:58:31,480: INFO: *** Step 3: Making an API call with the token
2024-10-03 10:58:31,480: INFO: Trying POST API call to: /portalapi/v1/tenants/d9577417-fcee-4e4b-b933-42be7cfa5e96/sase/authentication/versa-directory
2024-10-03 10:58:31,891: INFO: API response status: 201
2024-10-03 10:58:31,893: INFO: API response body: {"isCustomizedVersion":false,"builtIn":null,"lastModifiedUser":"karunakar.raj@orange.com","description":"Description of Some Random Name","attributes":{"directory":{"type":"SASE_VERSA_DIRECTORY_AUTHENTICATION","value":{"users":[{"userName":"new1@user.com","firstName":"New First Name","lastName":"New Last Name","password":"password123","emailId":"new1@user.com","phoneNumber":"4518931234","description":"New user from API","groupNames":["New Group 1"]}],"userGroups":[{"name":"New Group 1 for Raj","description":"New Group created by API"}]}}},"enabled":true,"uuid":"99c9b28b-88fd-4220-95f6-8a4eb8d3cb7c","name":"Some Random Name","version":null,"originId":null,"type":"SASE_AUTHENTICATION","subtype":"SASE_VERSA_DIRECTORY_AUTHENTICATION","category":null,"federatedPath":null,"isDefault":null,"lastModified":"2024-10-03T05:28:29.730+0000","createDate":"2024-10-03T05:28:29.730+0000","isReusable":null,"tags":[]}
2024-10-03 10:58:31,893: INFO: <Response [201]>
2024-10-03 10:58:31,893: INFO: PayLoad= {'attributes': {'directory': {'value': {'userGroups': [{'description': 'New Group created by API', 'name': 'New Group 1 for Raj'}], 'users': [{'description': 'New user from API', 'emailId': 'new1@user.com', 'firstName': 'New First Name', 'groupNames': ['New Group 1'], 'lastName': 'New Last Name', 'password': 'password123', 'phoneNumber': '4518931234', 'userName': 'new1@user.com'}]}}}, 'description': 'Description of Some Random Name', 'enabled': 1, 'name': 'Some Random Name'}
